import e from"node:process";globalThis._importMeta_=globalThis._importMeta_||{url:"file:///_entry.js",env:e.env},globalThis.__timing__.logStart("Load chunks/routes//renderer");import{AsyncLocalStorage as t}from"node:async_hooks";import{getRequestDependencies as n,getPreloadLinks as o,getPrefetchLinks as r,createRenderer as s}from"vue-bundle-renderer/runtime";import{d as a,b as i,p as l,g as d,c,a as p,u,e as f,f as h,r as m,h as g,i as y}from"../nitro/nitro.mjs";import{stringify as b,uneval as _}from"devalue";import{renderToString as v}from"vue/server-renderer";import{propsToString as x,renderSSRHead as w}from"@unhead/ssr";import{createServerHead as C,CapoPlugin as T}from"unhead";import{version as S,unref as j}from"vue";import{defineHeadPlugin as A}from"@unhead/shared";import"node:http";import"node:https";import"node:fs";import"node:path";import"node:url";import"ipx";const k="3"===S[0];function resolveUnrefHeadInput(e){if(e instanceof Promise||e instanceof Date||e instanceof RegExp)return e;const t="function"==typeof(n=e)?n():j(n);var n;if(!e||!t)return t;if(Array.isArray(t))return t.map((e=>resolveUnrefHeadInput(e)));if("object"==typeof t){const e={};for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&("titleTemplate"===n||"o"===n[0]&&"n"===n[1]?e[n]=j(t[n]):e[n]=resolveUnrefHeadInput(t[n]));return e}return t}const $=A({hooks:{"entries:resolve":e=>{for(const t of e.entries)t.resolvedInput=resolveUnrefHeadInput(t.input)}}});function createServerHead(e={}){const t=C(e);return t.use($),t.install=function(e){return{install(t){k&&(t.config.globalProperties.$unhead=e,t.config.globalProperties.$head=e,t.provide("usehead",e))}}.install}(t),t}const R=[T({track:!0})],P={omitLineBreaks:!1},H={meta:[{charset:"utf-8"},{name:"viewport",content:"width=device-width, initial-scale=1"},{name:"description",content:"Professional landscaping services in the Rhode Island Area"},{name:"theme-color",content:"#10B981"},{name:"format-detection",content:"telephone=no"}],link:[{rel:"icon",type:"image/x-icon",href:"/favicon.ico"},{rel:"preconnect",href:"https://fonts.googleapis.com"},{rel:"preconnect",href:"https://fonts.gstatic.com",crossorigin:"anonymous"}],style:[],script:[],noscript:[],title:"M.V Landscaping",htmlAttrs:{lang:"en"}},L="div",I={id:"teleports"};globalThis.__buildAssetsURL=i,globalThis.__publicAssetsURL=l,"AsyncLocalStorage"in globalThis||(globalThis.AsyncLocalStorage=t);const getClientManifest=()=>import("../build/client.manifest.mjs").then((e=>e.default||e)).then((e=>"function"==typeof e?e():e)),O=lazyCachedFunction((()=>import("../build/styles.mjs").then((e=>e.default||e)))),U=lazyCachedFunction((async()=>{const e=await getClientManifest();if(!e)throw new Error("client.manifest is not available");const t=await import("../build/server.mjs").then((function(e){return e.s})).then((e=>e.default||e));if(!t)throw new Error("Server bundle is not available");return s(t,{manifest:e,renderToString:async function(e,t){const n=await v(e,t);return B+n+D},buildAssetsURL:i})})),M=lazyCachedFunction((async()=>{const e=await getClientManifest(),t=await import("../virtual/_virtual_spa-template.mjs").then((e=>e.template)).catch((()=>"")).then((e=>B+e+D)),n=s((()=>()=>{}),{manifest:e,renderToString:()=>t,buildAssetsURL:i}),o=await n.renderToString({});return{rendererContext:n.rendererContext,renderToString:e=>{const t=u(e.event);return e.modules=e.modules||new Set,e.payload.serverRendered=!1,e.config={public:t.public,app:t.app},Promise.resolve(o)}}})),N=/\.json(\?.*)?$/;const E=!!I.id,z=E?`<div${x(I)}>`:"",F=E?"</div>":"",B=`<${L}${x({id:"__nuxt"})}>`,D=`</${L}>`,J=/\/_payload.json(\?.*)?$/,X=new RegExp(`^<${L}[^>]*>([\\s\\S]*)<\\/${L}>$`),q=a((async e=>{const t=y(),s=e.path.startsWith("/__nuxt_error")?d(e):null;if(s&&s.statusCode&&(s.statusCode=Number.parseInt(s.statusCode)),s&&!("__unenv__"in e.node.req))throw c({statusCode:404,statusMessage:"Page Not Found: /__nuxt_error"});const a=e.path.startsWith("/__nuxt_island"),l=a?await async function(e){const t=(e.path||"").substring(15).replace(N,"").split("_"),n=t.length>1?t.pop():void 0,o=t.join("_"),r="GET"===e.method?d(e):await m(e);return{url:"/",...r,id:n,name:o,props:g(r.props)||{},slots:{},components:{}}}(e):void 0;let _=s?.url||l?.url||e.path;const v=J.test(_)&&!a;v&&(_=_.substring(0,_.lastIndexOf("/"))||"/",e._path=_,e.node.req.url=_);const x=p(e),C=createServerHead({plugins:R}),T={mode:"server"};a||C.push(H,T);const S={url:_,event:e,runtimeConfig:u(e),noSSR:e.context.nuxt?.noSSR||!1===x.ssr&&!a||!1,head:C,error:!!s,nuxt:void 0,payload:s?{error:s}:{},_payloadReducers:Object.create(null),modules:new Set,islandContext:l},j=S.noSSR?await M():await U();if(!a)for(const e of await getClientManifest().then((e=>Object.values(e).filter((e=>e._globalCSS)).map((e=>e.src)))))S.modules.add(e);const A=await j.renderToString(S).catch((async e=>{if(S._renderResponse&&"skipping render"===e.message)return{};const t=!s&&S.payload?.error||e;throw await(S.nuxt?.hooks.callHook("app:error",t)),t}));if(await(S.nuxt?.hooks.callHook("app:rendered",{ssrContext:S,renderResult:A})),S._renderResponse)return S._renderResponse;if(S.payload?.error&&!s)throw S.payload.error;if(v){const e=function(e){return{body:b(splitPayload(e).payload,e._payloadReducers),statusCode:f(e.event),statusMessage:h(e.event),headers:{"content-type":"application/json;charset=utf-8","x-powered-by":"Nuxt"}}}(S);return e}const k=await async function(e){const t=await O(),n=new Set;for(const o of e)if(o in t&&t[o])for(const e of await t[o]())n.add(e);return Array.from(n).map((e=>({innerHTML:e})))}(S.modules??[]),$=x.experimentalNoScripts,{styles:L,scripts:B}=n(S,j.rendererContext);if(S._preloadManifest&&C.push({link:[{rel:"preload",as:"fetch",fetchpriority:"low",crossorigin:"anonymous",href:i(`builds/meta/${S.runtimeConfig.app.buildId}.json`)}]},{...T,tagPriority:"low"}),k.length&&C.push({style:k}),!a){const e=[];for(const t of Object.values(L))e.push({rel:"stylesheet",href:j.rendererContext.buildAssetsURL(t.file),crossorigin:""});e.length&&C.push({link:e},T)}$||a||(C.push({link:o(S,j.rendererContext)},T),C.push({link:r(S,j.rendererContext)},T),C.push({script:renderPayloadJsonScript({ssrContext:S,data:S.payload})},{...T,tagPosition:"bodyClose",tagPriority:"high"})),x.experimentalNoScripts||a||C.push({script:Object.values(B).map((e=>({type:e.module?"module":null,src:j.rendererContext.buildAssetsURL(e.file),defer:!e.module||null,tagPosition:"head",crossorigin:""})))},T);const{headTags:D,bodyTags:X,bodyTagsOpen:q,htmlAttrs:W,bodyAttrs:G}=await w(C,P),V={island:a,htmlAttrs:W?[W]:[],head:normalizeChunks([D]),bodyAttrs:G?[G]:[],bodyPrepend:normalizeChunks([q,S.teleports?.body]),body:[replaceIslandTeleports(S,A.html),z+(E?joinTags([S.teleports?.[`#${I.id}`]]):"")+F],bodyAppend:[X]};if(await t.hooks.callHook("render:html",V,{event:e}),a&&l){const n={};for(const e of C.headEntries())for(const[t,o]of Object.entries(resolveUnrefHeadInput(e.input))){const e=n[t];Array.isArray(e)&&e.push(...o),n[t]=o}n.link||=[],n.style||=[];const o={id:l.id,head:n,html:getServerComponentHTML(V.body),components:getClientIslandResponse(S),slots:getSlotIslandResponse(S)};await t.hooks.callHook("render:island",o,{event:e,islandContext:l});return{body:JSON.stringify(o,null,2),statusCode:f(e),statusMessage:h(e),headers:{"content-type":"application/json;charset=utf-8","x-powered-by":"Nuxt"}}}var Y;return{body:(Y=V,`<!DOCTYPE html><html${joinAttrs(Y.htmlAttrs)}><head>${joinTags(Y.head)}</head><body${joinAttrs(Y.bodyAttrs)}>${joinTags(Y.bodyPrepend)}${joinTags(Y.body)}${joinTags(Y.bodyAppend)}</body></html>`),statusCode:f(e),statusMessage:h(e),headers:{"content-type":"text/html;charset=utf-8","x-powered-by":"Nuxt"}}}));function lazyCachedFunction(e){let t=null;return()=>(null===t&&(t=e().catch((e=>{throw t=null,e}))),t)}function normalizeChunks(e){return e.filter(Boolean).map((e=>e.trim()))}function joinTags(e){return e.join("")}function joinAttrs(e){return 0===e.length?"":" "+e.join(" ")}function renderPayloadJsonScript(e){const t={type:"application/json",innerHTML:e.data?b(e.data,e.ssrContext._payloadReducers):"","data-nuxt-data":"nuxt-app","data-ssr":!e.ssrContext.noSSR,id:"__NUXT_DATA__"};e.src&&(t["data-src"]=e.src);return[t,{innerHTML:`window.__NUXT__={};window.__NUXT__.config=${_(e.ssrContext.config)}`}]}function splitPayload(e){const{data:t,prerenderedAt:n,...o}=e.payload;return{initial:{...o,prerenderedAt:n},payload:{data:t,prerenderedAt:n}}}function getServerComponentHTML(e){const t=e[0].match(X);return t?.[1]||e[0]}const W=/^uid=([^;]*);slot=(.*)$/,G=/^uid=([^;]*);client=(.*)$/,V=/^island-slot=[^;]*;(.*)$/;function getSlotIslandResponse(e){if(!e.islandContext||!Object.keys(e.islandContext.slots).length)return;const t={};for(const[n,o]of Object.entries(e.islandContext.slots))t[n]={...o,fallback:e.teleports?.[`island-fallback=${n}`]};return t}function getClientIslandResponse(e){if(!e.islandContext||!Object.keys(e.islandContext.components).length)return;const t={};for(const[n,o]of Object.entries(e.islandContext.components)){const r=e.teleports?.[n]?.replaceAll("\x3c!--teleport start anchor--\x3e","")||"";t[n]={...o,html:r,slots:getComponentSlotTeleport(e.teleports??{})}}return t}function getComponentSlotTeleport(e){const t=Object.entries(e),n={};for(const[e,o]of t){const t=e.match(V);if(t){const[,e]=t;if(!e)continue;n[e]=o}}return n}function replaceIslandTeleports(e,t){const{teleports:n,islandContext:o}=e;if(o||!n)return t;for(const e in n){const o=e.match(G);if(o){const[,r,s]=o;if(!r||!s)continue;t=t.replace(new RegExp(` data-island-uid="${r}" data-island-component="${s}"[^>]*>`),(t=>t+n[e]));continue}const r=e.match(W);if(r){const[,o,s]=r;if(!o||!s)continue;t=t.replace(new RegExp(` data-island-uid="${o}" data-island-slot="${s}"[^>]*>`),(t=>t+n[e]))}}return t}export{q as default};globalThis.__timing__.logEnd("Load chunks/routes//renderer");
//# sourceMappingURL=renderer.mjs.map
